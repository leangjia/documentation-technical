<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <title>异步操作 &mdash; odoo 9.0 文档</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/patchqueue.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/patchqueue.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/doc.js"></script>
    <script type="text/javascript" src="../_static/jquery.noconflict.js"></script>
    <link rel="top" title="odoo 9.0 文档" href="../index.html" /> 
  </head>
  <body role="document"><header class="o_main_header o_has_sub_nav o_inverted ">
    <div class="o_main_header_main">
      <a class="pull-left o_logo" href="/"></a>
      <a href="#" class="o_mobile_menu_toggle visible-xs-block pull-right">
        <span class="sr-only">Toggle navigation</span>
        <span class="mdi-navigation-menu"></span>
      </a>
      <div class="o_header_buttons">
        <a href="http://www.odoo.com/trial" class="btn btn-primary">Start Now</a>
      </div>
      <ul class="o_primary_nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle">Apps</a>
          <div class="dropdown-menu o_secondary_nav">
            <div class="container">
              <div class="row">
                <div class="col-sm-3 o_website_apps">
                  <div class="o_nav_app_family">
                    <span></span> Websites
                    <div>Build great user experience</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/website-builder">Website Builder</a></li>
                    <li><a href="https://www.odoo.com/page/e-commerce">eCommerce</a></li>
                    <li><a href="https://www.odoo.com/page/blog-engine">Blogs</a></li>
                    <li><a href="https://www.odoo.com/page/community-builder">Forums</a></li>
                    <li><a href="https://www.odoo.com/page/slides">Slides</a></li>
                    <li><a href="https://adspike.odoo.com">SEA</a></li>
                  </ul>
                </div>
                <div class="col-sm-3 o_sale_apps">
                  <div class="o_nav_app_family">
                    <span></span> Sales
                    <div>Boost your success rate</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/sales">Sales</a></li>
                    <li><a href="https://www.odoo.com/page/crm">CRM</a></li>
                    <li><a href="https://www.odoo.com/page/billing">Invoicing</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Point of Sale</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/point-of-sale">Shops</a></li>
                        <li><a href="https://www.odoo.com/page/pos-restaurant">Restaurants</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/subscriptions">Subscriptions</a></li>
                    <li><a href="https://www.odoo.com/page/sign">Sign</a></li>
                  </ul>
                </div>
                <div class="col-sm-3 o_operation_apps">
                  <div class="o_nav_app_family">
                    <span></span> Operations
                    <div>It's all about efficiency</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/accounting/">Accounting</a></li>
                    <li><a href="https://www.odoo.com/page/project-management/">Project</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Human Resources</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/recruitment">Recruitment</a></li>
                        <li><a href="https://www.odoo.com/page/employees">Employees</a></li>
                        <li><a href="https://www.odoo.com/page/expenses">Expenses</a></li>
                        <li><a href="https://www.odoo.com/page/appraisal">Appraisal</a></li>
                        <li><a href="https://www.odoo.com/page/fleet">Fleet</a></li>
                        <li><a href="https://www.odoo.com/page/leaves">Leaves</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/warehouse">Inventory</a></li>
                    <li><a href="https://www.odoo.com/page/purchase">Purchase</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Manufacturing</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/manufacturing">MRP</a></li>
                        <li><a href="https://www.odoo.com/page/plm">PLM</a></li>
                        <li><a href="https://www.odoo.com/page/maintenance">Maintenance</a></li>
                        <li><a href="https://www.odoo.com/page/quality">Quality</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="col-sm-3 o_productivity_apps">
                  <div class="o_nav_app_family">
                    <span></span> Productivity Tools
                    <div>Great Tools = Happy People</div>
                  </div>
                  <ul>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Communication</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/discuss">Discuss</a></li>
                        <li><a href="https://www.odoo.com/page/discuss-groups">Mailing Lists</a></li>
                        <li><a href="https://www.odoo.com/page/notes">Notes</a></li>
                        <li><a href="#">Help desk</a></li>
                        <li><a href="#">Appointment</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/timesheet">Timesheet</a></li>
                    <li><a href="https://www.odoo.com/page/email-marketing">Email Marketing</a></li>
                    <li><a href="https://www.odoo.com/page/events">Events</a></li>
                    <li><a href="https://www.odoo.com/page/survey">Survey</a></li>
                    <li><a href="https://www.odoo.com/page/live-chat">Live Chat</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <a href="http://www.odoo.com/apps/modules" class="o_store_link"><i class="fa fa-cube fa-fw"></i> Third party apps</a>
          </div>
        </li>
        <li><a href="https://www.odoo.com/page/tour">Tour</a></li>
        <li><a href="https://www.odoo.com/pricing">Pricing</a></li>
        <li><a href="https://www.odoo.com/page/docs">Docs</a></li>
      </ul>
    </div>
    <nav class="navbar o_sub_nav">
      <div class="container">
        <div class="navbar-header visible-xs">
            <button type="button" class="navbar-toggle collapsed text-left btn-block" data-toggle="collapse" data-target="#o_sub-menu" aria-expanded="false">
              Navigate
              <span class="mdi-hardware-keyboard-arrow-down pull-right"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="o_sub-menu">
          <ol class="o_breadcrumb breadcrumb nav navbar-left">
              
              





    
    <li class="active"><a href="#">异步操作</a></li>

              
          </ol>

          <div class="call-to-action navbar-right hidden-xs">
            <a href="http://www.odoo.com/trial" class="btn btn-primary">Start Now</a>
          </div>

          <ul class="navbar-nav navbar-right nav o_sub_nav_actions">
            
              <li class="divider"></li>
            

            
            


            
          </ul>

          <ul class="nav navbar-nav navbar-right">
            

            
            

<li><a href="http://www.odoo.com/documentation/user/9.0/index.html">User</a></li>
<li><a href="http://www.odoo.com/documentation/9.0/index.html">Developer</a></li>
<li><a href="http://www.odoo.com/documentation/9.0/api_integration.html">API</a></li>
<li><a href="http://www.odoo.com/documentation/9.0/setup/install.html">Installation</a></li>
<li><a href="http://www.odoo.com/page/odoo-white-paper">White Papers</a></li>
<li><a href="http://www.odoo.com/page/legal">Legal</a></li>
            

            
          </ul>
        </div>
      </div>
    </nav>
  </header><div id="wrap" class="">
    
    
    
    <figure class="card top has_banner">
      <span class="card-img" style="background-image: url('../_static/banners/installing_odoo.jpg');"></span>
      <div class="container text-center">
        <h1> 异步操作 </h1>
      </div>
    </figure>
    
    
    
    <div class="container ">
      <main class="container-fluid ">
        
        <div class="row">
          
          <aside>
            <div class="navbar-aside text-center">
              <ul class="list-group text-left nav"><li class="list-group-item"><a href="#deferreds" class="ripple internal reference">递延</a><ul ><li class="list-group-item"><a href="#using-deferreds" class="ripple internal reference">使用递延</a></li><li class="list-group-item"><a href="#building-deferreds" class="ripple internal reference">构建递延</a></li><li class="list-group-item"><a href="#composing-deferreds" class="ripple internal reference">撰写递延</a><ul ><li class="list-group-item"><a href="#deferred-multiplexing" class="ripple internal reference">递延复用</a></li><li class="list-group-item"><a href="#deferred-chaining" class="ripple internal reference">递延链接</a></li></ul></li><li class="list-group-item"><a href="#jquery-deferred-api" class="ripple internal reference">jQuery.Deferred API</a></li></ul></li></ul>
              
              <p class="gith-container"><a href="https://github.com/odoo/odoo/edit/9.0/doc/reference/async.rst" class="gith-link">
                  Edit on GitHub
              </a></p>
              
            </div>
          </aside>
          
          <article class="doc-body ">
            
            
  <section id="asynchronous-operations"><i id="reference-async"></i><p >As a language (and runtime), javascript is fundamentally
single-threaded. This means any blocking request or computation will
block the whole page (and, in older browsers, the software itself
even preventing users from switching to another tab): a javascript
environment can be seen as an event-based runloop where application
developers have no control over the runloop itself.</p><p >其结果是，在执行长期运行的同步网络请求或其他类型的复杂且昂贵的访问是令人难以接受的和异步API用于代替。</p><p >本指南的目标是提供一些工具来处理异步系统，并警告反对系统性的问题或危险。</p></section><section id="deferreds"><h2 >递延</h2><p >Deferreds是`promises`_的一种形式。 OpenERP的网站目前使用'jQuery的deferred`_。</p><p >The core idea of deferreds is that potentially asynchronous methods
will return a <a href="#Deferred" class="internal reference" title="Deferred"><code class="js-class xref js">Deferred()</code></a> object instead of an arbitrary
value or (most commonly) nothing.</p><p >此对象然后可用于通过添加回调到它跟踪异步操作的结束，无论是成功的回调或错误回调。</p><p >A great advantage of deferreds over simply passing callback functions
directly to asynchronous methods is the ability to <a href="#reference-async-composition" class="internal reference"><span >compose them</span></a>.</p></section><section id="using-deferreds"><h3 >使用递延</h3><p >Deferreds's most important method is <a href="#Deferred.then" class="internal reference" title="Deferred.then"><code class="js-func xref js">Deferred.then()</code></a>. It is
used to attach new callbacks to the deferred object.</p><ul ><li >the first parameter attaches a success callback, called when the
deferred object is successfully resolved and provided with the
resolved value(s) for the asynchronous operation.</li><li >the second parameter attaches a failure callback, called when the
deferred object is rejected and provided with rejection values
(often some sort of error message).</li></ul><p >Callbacks attached to deferreds are never &quot;lost&quot;: if a callback is
attached to an already resolved or rejected deferred, the callback
will be called (or ignored) immediately. A deferred is also only ever
resolved or rejected once, and is either resolved or rejected: a given
deferred can not call a single success callback twice, or call both a
success and a failure callbacks.</p><p ><a href="#Deferred.then" class="internal reference" title="Deferred.then"><code class="js-func xref js">then()</code></a> should be the method you'll use most often
when interacting with deferred objects (and thus asynchronous APIs).</p></section><section id="building-deferreds"><h3 >构建递延</h3><p >After using asynchronous APIs may come the time to build them: for
<a href="http://en.wikipedia.org/wiki/Mock_object" class="external reference">mocks</a>, to compose deferreds from multiple source in a complex
manner, in order to let the current operations repaint the screen or
give other events the time to unfold, ...</p><p >这是很容易使用jQuery的延迟对象。</p><div role="alert" class="alert-info alert"><p class="alert-title">注解</p><p >this section is an implementation detail of jQuery Deferred
objects, the creation of promises is not part of any
standard (even tentative) that I know of. If you are using
deferred objects which are not jQuery's, their API may (and
often will) be completely different.</p></div><p >Deferreds are created by invoking their constructor <a href="#id3" class="footnote-ref" id="id1">1</a> without any
argument. This creates a <a href="#Deferred" class="internal reference" title="Deferred"><code class="js-class xref js">Deferred()</code></a> instance object with the
following methods:</p><p ><a href="#Deferred.resolve" class="internal reference" title="Deferred.resolve"><code class="js-func xref js">Deferred.resolve()</code></a></p><blockquote >As its name indicates, this method moves the deferred to the
&quot;Resolved&quot; state. It can be provided as many arguments as
necessary, these arguments will be provided to any pending success
callback.</blockquote><p ><a href="#Deferred.reject" class="internal reference" title="Deferred.reject"><code class="js-func xref js">Deferred.reject()</code></a></p><blockquote >Similar to <a href="#Deferred.resolve" class="internal reference" title="Deferred.resolve"><code class="js-func xref js">resolve()</code></a>, but moves the deferred to
the &quot;Rejected&quot; state and calls pending failure handlers.</blockquote><p ><a href="#Deferred.promise" class="internal reference" title="Deferred.promise"><code class="js-func xref js">Deferred.promise()</code></a></p><blockquote ><p >创建延迟对象的只读视图。它一般是返回的承诺视图推迟到防止对方解决或拒绝推迟代替你一个好主意。</p></blockquote><p ><a href="#Deferred.reject" class="internal reference" title="Deferred.reject"><code class="js-func xref js">reject()</code></a> and <a href="#Deferred.resolve" class="internal reference" title="Deferred.resolve"><code class="js-func xref js">resolve()</code></a> are used
to inform callers that the asynchronous operation has failed (or
succeeded). These methods should simply be called when the
asynchronous operation has ended, to notify anybody interested in its
result(s).</p></section><section id="composing-deferreds"><i id="reference-async-composition"></i><h3 >撰写递延</h3><p >What we've seen so far is pretty nice, but mostly doable by passing
functions to other functions (well adding functions post-facto would
probably be a chore... still, doable).</p><p >当代码需要构成异步操作以某种方式或其他Deferreds真正亮，因为它们可以被用作该组合物的基础。</p><p >There are two main forms of compositions over deferred: multiplexing
and piping/cascading.</p></section><section id="deferred-multiplexing"><h4 >递延复用</h4><p >The most common reason for multiplexing deferred is simply performing
multiple asynchronous operations and wanting to wait until all of them are
done before moving on (and executing more stuff).</p><p >The jQuery multiplexing function for promises is <a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a>.</p><div role="alert" class="alert-info alert"><p class="alert-title">注解</p><p >the multiplexing behavior of jQuery's <a href="#when" class="internal alert-link reference" title="when"><code class="js-func xref js">when()</code></a> is an
(incompatible, mostly) extension of the behavior defined in
<a href="http://wiki.commonjs.org/wiki/Promises/B" class="external reference alert-link">CommonJS Promises/B</a>.</p></div><p >This function can take any number of promises <a href="#id4" class="footnote-ref" id="id2">2</a> and will return a
promise.</p><p >The returned promise will be resolved when <em >all</em> multiplexed promises
are resolved, and will be rejected as soon as one of the multiplexed
promises is rejected (it behaves like Python's <code >all()</code>, but with
promise objects instead of boolean-ish).</p><p >The resolved values of the various promises multiplexed via
<a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a> are mapped to the arguments of <a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a>'s
success callback, if they are needed. The resolved values of a promise
are at the same index in the callback's arguments as the promise in
the <a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a> call so you will have:</p><div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">,</span> <span class="nx">p3</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">results0</span><span class="p">,</span> <span class="nx">results1</span><span class="p">,</span> <span class="nx">results2</span><span class="p">,</span> <span class="nx">results3</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// code</span>
<span class="p">});</span>
</pre></div>
</div>
<div role="alert" class="alert-warning alert"><p class="alert-title">警告</p><p >in a normal mapping, each parameter to the callback would be an
array: each promise is conceptually resolved with an array of 0..n
values and these values are passed to <a href="#when" class="internal alert-link reference" title="when"><code class="js-func xref js">when()</code></a>'s
callback. But jQuery treats deferreds resolving a single value
specially, and &quot;unwraps&quot; that value.</p><p >For instance, in the code block above if the index of each promise
is the number of values it resolves (0 to 3), <code >results0</code> is an
empty array, <code >results2</code> is an array of 2 elements (a pair) but
<code >results1</code> is the actual value resolved by <code >p1</code>, not an array.</p></div></section><section id="deferred-chaining"><h4 >递延链接</h4><p >A second useful composition is starting an asynchronous operation as
the result of an other asynchronous operation, and wanting the result
of both: with the tools described so far, handling e.g. OpenERP's
search/read sequence with this would require something along the lines
of:</p><div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
<span class="nx">Model</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">condition</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">ids</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Model</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">ids</span><span class="p">,</span> <span class="nx">fields</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">records</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">result</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">records</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
<span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
</pre></div>
</div>
<p >虽然它看起来并不太坏了琐碎的代码，这很快就会笨重。</p><p >But <a href="#Deferred.then" class="internal reference" title="Deferred.then"><code class="js-func xref js">then()</code></a> also allows handling this kind of
chains: it returns a new promise object, not the one it was called
with, and the return values of the callbacks is important to this behavior:
whichever callback is called,</p><ul ><li >If the callback is not set (not provided or left to null), the
resolution or rejection value(s) is simply forwarded to
<a href="#Deferred.then" class="internal reference" title="Deferred.then"><code class="js-func xref js">then()</code></a>'s promise (it's essentially a noop)</li><li ><p >If the callback is set and does not return an observable object (a
deferred or a promise), the value it returns (<code >undefined</code> if it
does not return anything) will replace the value it was given, e.g.</p><div class="highlight-javascript"><div class="highlight"><pre><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;called&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p >将解决与唯一的价值``undefined``。</p></li><li ><p >If the callback is set and returns an observable object, that object
will be the actual resolution (and result) of the pipe. This means a
resolved promise from the failure callback will resolve the pipe,
and a failure promise from the success callback will reject the
pipe.</p><p >This provides an easy way to chain operation successes, and the
previous piece of code can now be rewritten:</p><div class="highlight-javascript"><div class="highlight"><pre><span class="k">return</span> <span class="nx">Model</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">condition</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">ids</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Model</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">ids</span><span class="p">,</span> <span class="nx">fields</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p >the result of the whole expression will encode failure if either
<code >search</code> or <code >read</code> fails (with the right rejection values), and
will be resolved with <code >read</code>'s resolution values if the chain
executes correctly.</p></li></ul><p ><a href="#Deferred.then" class="internal reference" title="Deferred.then"><code class="js-func xref js">then()</code></a> is also useful to adapt third-party
promise-based APIs, in order to filter their resolution value counts
for instance (to take advantage of <a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a> 's special
treatment of single-value promises).</p></section><section id="jquery-deferred-api"><h3 >jQuery.Deferred API</h3><section class="code-function"><h6 id="when"><code>when(<em>deferreds…</em>)</code></h6><div class="code-fields"><div class="code-field"><div class="code-field-name">参数</div><div class="code-field-body"><ul ><li ><strong >deferreds</strong> -- deferred objects to multiplex</li></ul></div></div><div class="code-field"><div class="code-field-name">返回</div><div class="code-field-body">多路复用推迟</div></div><div class="code-field"><div class="code-field-name">返回类型</div><div class="code-field-body"><a href="#Deferred" class="internal alert-link reference" title="Deferred"><code class="js-class xref js">Deferred()</code></a></div></div></div></section><section class="code-class"><h6 id="Deferred"><code><em >class </em>Deferred()</code></h6><section class="code-function"><h6 id="Deferred.then"><code>Deferred.then(<em>doneCallback</em>[, <em>failCallback</em>])</code></h6><p >重视新的回调递延对象的分辨率或拒绝。回调在它们所连接的延迟的顺序执行。</p><p >To provide only a failure callback, pass <code >null</code> as the
<code >doneCallback</code>, to provide only a success callback the
second argument can just be ignored (and not passed at all).</p><p >返回一个新的推迟解析为相应的回调的结果，如果回调函数返回一个deferred本身新的延期将用作链的分辨率。</p><div class="code-fields"><div class="code-field"><div class="code-field-name">参数</div><div class="code-field-body"><ul ><li ><strong >doneCallback</strong> -- function called when the deferred is resolved</li><li ><strong >failCallback</strong> -- function called when the deferred is rejected</li></ul></div></div><div class="code-field"><div class="code-field-name">返回</div><div class="code-field-body">在它被称为延迟的对象</div></div><div class="code-field"><div class="code-field-name">返回类型</div><div class="code-field-body"><a href="#Deferred" class="internal alert-link reference" title="Deferred"><code class="js-class xref js">Deferred()</code></a></div></div></div></section><section class="code-function"><h6 id="Deferred.done"><code>Deferred.done(<em>doneCallback</em>)</code></h6><p >Attaches a new success callback to the deferred, shortcut for
<code >deferred.then(doneCallback)</code>.</p><div role="alert" class="alert-info alert"><p class="alert-title">注解</p><p >a difference is the result of <a href="#Deferred.done" class="internal alert-link reference" title="Deferred.done"><code class="js-func xref js">Deferred.done()</code></a>'s
is ignored rather than forwarded through the chain</p></div><p >This is a jQuery extension to <a href="http://wiki.commonjs.org/wiki/Promises/A" class="external reference alert-link">CommonJS Promises/A</a> providing
little value over calling <a href="#Deferred.then" class="internal alert-link reference" title="Deferred.then"><code class="js-func xref js">then()</code></a> directly,
it should be avoided.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">参数</div><div class="code-field-body"><ul ><li ><strong >doneCallback</strong> (<em >Function</em>) -- function called when the deferred is resolved</li></ul></div></div><div class="code-field"><div class="code-field-name">返回</div><div class="code-field-body">在它被称为延迟的对象</div></div><div class="code-field"><div class="code-field-name">返回类型</div><div class="code-field-body"><a href="#Deferred" class="internal alert-link reference" title="Deferred"><code class="js-class xref js">Deferred()</code></a></div></div></div></section><section class="code-function"><h6 id="Deferred.fail"><code>Deferred.fail(<em>failCallback</em>)</code></h6><p >Attaches a new failure callback to the deferred, shortcut for
<code >deferred.then(null, failCallback)</code>.</p><p >A second jQuery extension to <a href="CommonJSPromises/A" class="external reference alert-link">Promises/A</a>. Although it provides more value than
<a href="#Deferred.done" class="internal alert-link reference" title="Deferred.done"><code class="js-func xref js">done()</code></a>, it still is not much and should be
avoided as well.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">参数</div><div class="code-field-body"><ul ><li ><strong >failCallback</strong> (<em >Function</em>) -- function called when the deferred is rejected</li></ul></div></div><div class="code-field"><div class="code-field-name">返回</div><div class="code-field-body">在它被称为延迟的对象</div></div><div class="code-field"><div class="code-field-name">返回类型</div><div class="code-field-body"><a href="#Deferred" class="internal alert-link reference" title="Deferred"><code class="js-class xref js">Deferred()</code></a></div></div></div></section><section class="code-function"><h6 id="Deferred.promise"><code>Deferred.promise()</code></h6><p >Returns a read-only view of the deferred object, with all
mutators (resolve and reject) methods removed.</p></section><section class="code-function"><h6 id="Deferred.resolve"><code>Deferred.resolve(<em>value…</em>)</code></h6><p >调用此方法来解决延迟，任何规定将被传递到延迟的对象的成功处理程序的价值。</p><p >解决了延迟已经被解决或拒绝没有任何影响。</p></section><section class="code-function"><h6 id="Deferred.reject"><code>Deferred.reject(<em>value…</em>)</code></h6><p >Called to reject (fail) a deferred, any value provided will be
passed onto the failure handler of the deferred object.</p><p >拒绝延期它已经得到解决或拒绝没有任何影响。</p></section></section><div class="footnote" id="id3"><span class="footnote-label"><a class="footnote-backref" href="#id1">[1]</a></span> or simply calling <a href="#Deferred" class="internal reference" title="Deferred"><code class="js-class xref js">Deferred()</code></a> as a function, the
result is the same</div><div class="footnote" id="id4"><span class="footnote-label"><a class="footnote-backref" href="#id2">[2]</a></span> <p >or not-promises, the <a href="http://wiki.commonjs.org/wiki/Promises/B" class="external reference">CommonJS Promises/B</a> role of
<a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a> is to be able to treat values and promises
uniformly: <a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a> will pass promises through directly,
but non-promise values and objects will be transformed into a
resolved promise (resolving themselves with the value itself).</p><p >jQuery's <a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a> keeps this behavior making deferreds
easy to build from &quot;static&quot; values, or allowing defensive code
where expected promises are wrapped in <a href="#when" class="internal reference" title="when"><code class="js-func xref js">when()</code></a> just in
case.</p></div></section>

          </article>
        </div>
        
        <div id="mask"></div>
      </main>
    </div>
  </div>

  <div class="floating_action_container">
    <a id="floating_action" class="ripple" href="#">
      <i class="mdi-action-explore"></i>
    </a>
    <div id="floating_action_menu">
      <span class="bubble"></span>
      <ul class="list-group content">
        <li class="list-group-item ripple"><a>Cras justo odio</a></li>
        <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
        <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
        <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
        <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
      </ul>
    </div>
  </div>
  <footer>
    <div id="footer" class="container">
      <span class="o_logo o_logo_inverse center-block o_footer_logo"></span>
      <div class="row">
        <div class="col-sm-7 col-md-7 col-lg-6">
          <div class="row">
            <div class="col-xs-6 col-sm-4">
              <span class="menu_title">Community</span>
              <ul>
                <li><a href="https://github.com/odoo/odoo">Github</a></li>
                <li><a href="http://www.odoo.com/page/download">Download</a></li>
                <li class="divider"></li>
                <li><a href="http://runbot.odoo.com/runbot/repo/git-github-com-odoo-enterprise-7">Runbot</a></li>
                <li><a href="https://github.com/odoo/odoo/wiki/Translations">Translations</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/odoo-community">Mailing Lists</a></li>
                <li><a href="http://www.odoo.com/forum/help-1">Forum</a></li>
              </ul>
            </div>
            <div class="col-xs-6 col-sm-4">
              <span class="menu_title">Services</span>
              <ul>
                <li><a href="http://www.odoo.com/pricing">Editions</a></li>
                <li><a href="http://www.odoo.com/pricing-online">Cloud Pricing</a></li>
                <li><a href="http://www.odoo.com/page/upgrade">Upgrade</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/partners">Find a partner</a></li>
                <li><a href="http://www.odoo.com/page/become-a-partner">Become a partner</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/education-program">Education</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/security">Security</a></li>
              </ul>
            </div>
            <div class="col-sm-4 mb64">
              <span class="menu_title">About us</span>
              <ul>
                <li><a href="http://www.odoo.com/page/about-us">Our company</a></li>
                <li><a href="http://www.odoo.com/page/contactus">Contact</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/event">Events</a></li>
                <li><a href="http://www.odoo.com/blog/">Blog</a></li>
                <li><a href="http://www.odoo.com/blog/6">Customers</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/jobs">Jobs</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-sm-5 col-md-4 col-md-offset-1 col-lg-5 col-lg-offset-1">
          <p>
            <small>
              Odoo is a suite of open source business apps that cover all your company needs: CRM, eCommerce, accounting, inventory, point of sale, project management, etc.
              <br/><br/>
              Odoo's unique value proposition is to be at the same time very easy to use and fully integrated.
            </small>
          </p>
        </div>
      </div>
    </div>
    <div class="o_footer_bottom">
      <div class="container">
        <a class="small" href="http://www.odoo.com/page/website-builder">Website made with <span class="o_logo o_logo_inverse o_logo_15"></span></a>
        <div class="social-links pull-right">
          <a href="http://www.odoo.com/web/about/facebook"><i class="fa fa-facebook"></i></a>
          <a href="http://www.odoo.com/web/about/twitter"><i class="fa fa-twitter"></i></a>
          <a href="http://www.odoo.com/web/about/linkedin"><i class="fa fa-linkedin"></i></a>
          <a href="mailto:info@odoo.com"><i class="fa fa-envelope"></i></a>
        </div>
      </div>
    </div>
  </footer>
  </body>
</html>